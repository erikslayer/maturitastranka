<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SpojovÃ¡nÃ­ tabulek v relaÄnÃ­ch databÃ¡zÃ­ch - INNER, LEFT, RIGHT JOIN.">
    <title>23. SpojovÃ¡nÃ­ tabulek - DB | Maturita PortÃ¡l</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../styles.css">
</head>

<body>
    <div class="container">
        <header>
            <a href="../../index.html" class="logo">MaturitaPortÃ¡l</a>
            <nav>
                <ul>
                    <li><a href="../../index.html">DomÅ¯</a></li>
                    <li><a href="../../literatura/index.html">Literatura</a></li>
                    <li><a href="../index.html" class="active">ICT</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <nav class="breadcrumb">
                <a href="../../index.html">DomÅ¯</a><span class="separator">â€º</span>
                <a href="../index.html">ICT</a><span class="separator">â€º</span>
                <a href="../db.html">DatabÃ¡ze</a><span class="separator">â€º</span>
                <span class="current">SpojovÃ¡nÃ­ tabulek</span>
            </nav>
            <div class="book-header animate-fade-in">
                <h1>ğŸ”— SpojovÃ¡nÃ­ tabulek v relaÄnÃ­ch databÃ¡zÃ­ch</h1>
                <p class="author">TÃ©ma 23 - DatabÃ¡ze</p>
                <div class="meta">
                    <span class="meta-item">ğŸ’¾ DatabÃ¡ze</span>
                    <span class="meta-item">ğŸ“š MaturitnÃ­ okruh</span>
                </div>
            </div>
            <div class="glass-panel animate-fade-in book-content">
                <h2>ğŸ“– ProÄ spojovat tabulky?</h2>
                <p>V relaÄnÃ­ch databÃ¡zÃ­ch jsou data <strong>normalizovÃ¡na</strong> â€“ rozdÄ›lena do vÃ­ce tabulek, aby se
                    eliminovaly duplicity. JOIN umoÅ¾Åˆuje <strong>spojit data z vÃ­ce tabulek</strong> do jednoho vÃ½sledku
                    na zÃ¡kladÄ› spoleÄnÃ©ho klÃ­Äe.</p>

                <p><strong>ğŸ’¡ PÅ™Ã­klad:</strong> E-shop mÃ¡ tabulku <code>uzivatele</code> a tabulku
                    <code>objednavky</code>. Chceme-li vypsat jmÃ©na zÃ¡kaznÃ­kÅ¯ s jejich objednÃ¡vkami, musÃ­me tabulky
                    spojit.</p>

                <h3>UkÃ¡zkovÃ© tabulky pro pÅ™Ã­klady</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
TABULKA: uzivatele                    TABULKA: objednavky
+----+---------------+               +----+-------------+------------+--------+
| id | jmeno         |               | id | uzivatel_id | datum      | castka |
+----+---------------+               +----+-------------+------------+--------+
| 1  | Jan NovÃ¡k     |               | 1  | 1           | 2025-01-15 | 500    |
| 2  | Eva SvobodovÃ¡ |               | 2  | 1           | 2025-02-20 | 800    |
| 3  | Petr ÄŒernÃ½    |               | 3  | 2           | 2025-03-10 | 1200   |
+----+---------------+               +----+-------------+------------+--------+
                                      â†‘ uzivatel_id je CIZÃ KLÃÄŒ â†’ uzivatele.id</pre>
                <p>VÅ¡imni si: Jan mÃ¡ 2 objednÃ¡vky, Eva mÃ¡ 1 objednÃ¡vku, Petr nemÃ¡ Å¾Ã¡dnou.</p>

                <h2>INNER JOIN</h2>
                <p>VrÃ¡tÃ­ pouze zÃ¡znamy, kterÃ© majÃ­ <strong>shodu v obou tabulkÃ¡ch</strong>. ZÃ¡znamy bez protÄ›jÅ¡ku jsou
                    vynechÃ¡ny.</p>

                <div
                    style="background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 8px; margin: 1rem 0; text-align: center;">
                    <pre style="font-family: monospace;">
    UÅ¾ivatelÃ©      ObjednÃ¡vky
    â”Œâ”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”
    â”‚     â”‚        â”‚     â”‚
    â”‚  â–ˆ  â”‚ INNER  â”‚  â–ˆ  â”‚  â†’ Pouze prÅ¯nik (â–ˆ)
    â”‚     â”‚  JOIN  â”‚     â”‚
    â””â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”˜</pre>
                </div>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
SELECT uzivatele.jmeno, objednavky.datum, objednavky.castka
FROM uzivatele
INNER JOIN objednavky ON uzivatele.id = objednavky.uzivatel_id;

-- VÃ½sledek: Jen uÅ¾ivatelÃ©, kteÅ™Ã­ majÃ­ objednÃ¡vku
-- +---------------+------------+--------+
-- | jmeno         | datum      | castka |
-- +---------------+------------+--------+
-- | Jan NovÃ¡k     | 2025-01-15 | 500    |
-- | Jan NovÃ¡k     | 2025-02-20 | 800    |
-- | Eva SvobodovÃ¡ | 2025-03-10 | 1200   |
-- +---------------+------------+--------+
-- Petr ÄŒernÃ½ CHYBÃ â€“ nemÃ¡ Å¾Ã¡dnou objednÃ¡vku!</pre>

                <h3>Aliasy pro pÅ™ehlednost</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- KratÅ¡Ã­ zÃ¡pis s aliasy (u = uzivatele, o = objednavky)
SELECT u.jmeno, o.datum, o.castka
FROM uzivatele u
INNER JOIN objednavky o ON u.id = o.uzivatel_id;</pre>

                <h2>LEFT JOIN (LEFT OUTER JOIN)</h2>
                <p>VrÃ¡tÃ­ <strong>vÅ¡echny zÃ¡znamy z levÃ© tabulky</strong> + odpovÃ­dajÃ­cÃ­ z pravÃ©. Pokud nenÃ­ shoda, pravÃ©
                    hodnoty jsou <strong>NULL</strong>.</p>

                <div
                    style="background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 8px; margin: 1rem 0; text-align: center;">
                    <pre style="font-family: monospace;">
    UÅ¾ivatelÃ©      ObjednÃ¡vky
    â”Œâ”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”
    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚  LEFT  â”‚     â”‚
    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚  JOIN  â”‚  â–ˆ  â”‚  â†’ CelÃ¡ levÃ¡ + prÅ¯nik
    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚        â”‚     â”‚
    â””â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”˜</pre>
                </div>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- VÅ¡ichni uÅ¾ivatelÃ© vÄetnÄ› tÄ›ch bez objednÃ¡vek
SELECT u.jmeno, o.datum, o.castka
FROM uzivatele u
LEFT JOIN objednavky o ON u.id = o.uzivatel_id;

-- VÃ½sledek:
-- +---------------+------------+--------+
-- | jmeno         | datum      | castka |
-- +---------------+------------+--------+
-- | Jan NovÃ¡k     | 2025-01-15 | 500    |
-- | Jan NovÃ¡k     | 2025-02-20 | 800    |
-- | Eva SvobodovÃ¡ | 2025-03-10 | 1200   |
-- | Petr ÄŒernÃ½    | NULL       | NULL   |  â† Petr je zde s NULL hodnotami!
-- +---------------+------------+--------+</pre>

                <h3>HledÃ¡nÃ­ zÃ¡znamÅ¯ BEZ protÄ›jÅ¡ku</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- UÅ¾ivatelÃ©, kteÅ™Ã­ NEMAJÃ Å¾Ã¡dnou objednÃ¡vku
SELECT u.jmeno
FROM uzivatele u
LEFT JOIN objednavky o ON u.id = o.uzivatel_id
WHERE o.id IS NULL;

-- VÃ½sledek: Petr ÄŒernÃ½</pre>

                <h2>RIGHT JOIN (RIGHT OUTER JOIN)</h2>
                <p>Opak LEFT JOIN â€“ vrÃ¡tÃ­ <strong>vÅ¡echny zÃ¡znamy z pravÃ© tabulky</strong> + odpovÃ­dajÃ­cÃ­ z levÃ©.</p>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
SELECT u.jmeno, o.datum, o.castka
FROM uzivatele u
RIGHT JOIN objednavky o ON u.id = o.uzivatel_id;

-- V praxi se pouÅ¾Ã­vÃ¡ mÃ©nÄ› â€“ lze pÅ™epsat jako LEFT JOIN s obrÃ¡cenÃ½m poÅ™adÃ­m tabulek</pre>

                <h2>CROSS JOIN (KartÃ©zskÃ½ souÄin)</h2>
                <p>SpojÃ­ <strong>kaÅ¾dÃ½ zÃ¡znam z prvnÃ­ tabulky s kaÅ¾dÃ½m ze druhÃ©</strong>. Pozor â€“ vÃ½sledek mÅ¯Å¾e bÃ½t
                    obrovskÃ½!</p>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- PÅ™Ã­klad: Kombinace barev a velikostÃ­
SELECT barvy.nazev, velikosti.nazev
FROM barvy
CROSS JOIN velikosti;

-- barvy: ÄervenÃ¡, modrÃ¡
-- velikosti: S, M, L
-- VÃ½sledek: 2 Ã— 3 = 6 kombinacÃ­
-- ÄervenÃ¡-S, ÄervenÃ¡-M, ÄervenÃ¡-L, modrÃ¡-S, modrÃ¡-M, modrÃ¡-L</pre>

                <h2>SELF JOIN</h2>
                <p>SpojenÃ­ tabulky <strong>se sebou samou</strong>. UÅ¾iteÄnÃ© pro hierarchickÃ© struktury
                    (zamÄ›stnanec-nadÅ™Ã­zenÃ½).</p>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- Tabulka: zamestnanci (id, jmeno, manazer_id)
-- manazer_id odkazuje na id jinÃ©ho zamÄ›stnance

SELECT e.jmeno AS zamestnanec, m.jmeno AS manazer
FROM zamestnanci e
LEFT JOIN zamestnanci m ON e.manazer_id = m.id;

-- VÃ½sledek:
-- +-------------+----------+
-- | zamestnanec | manazer  |
-- +-------------+----------+
-- | Jan         | NULL     |  â† Jan nemÃ¡ manaÅ¾era (je Å¡Ã©f)
-- | Eva         | Jan      |
-- | Petr        | Jan      |
-- | Marie       | Eva      |
-- +-------------+----------+</pre>

                <h2>SpojenÃ­ vÃ­ce tabulek</h2>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- E-shop: UÅ¾ivatel â†’ ObjednÃ¡vka â†’ PoloÅ¾ky â†’ Produkt
SELECT 
    u.jmeno AS zakaznik,
    o.datum,
    p.nazev AS produkt,
    po.mnozstvi
FROM uzivatele u
INNER JOIN objednavky o ON u.id = o.uzivatel_id
INNER JOIN polozky_objednavky po ON o.id = po.objednavka_id
INNER JOIN produkty p ON po.produkt_id = p.id
WHERE o.datum >= '2025-01-01'
ORDER BY o.datum;</pre>

                <h2>Poddotazy (Subqueries)</h2>
                <p>Dotaz vnoÅ™enÃ½ v jinÃ©m dotazu. Alternativa k JOINu v nÄ›kterÃ½ch pÅ™Ã­padech.</p>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- V podmÃ­nce WHERE
SELECT * FROM uzivatele 
WHERE id IN (SELECT DISTINCT uzivatel_id FROM objednavky);
-- UÅ¾ivatelÃ©, kteÅ™Ã­ majÃ­ alespoÅˆ jednu objednÃ¡vku

-- Jako doÄasnÃ¡ tabulka (derived table)
SELECT * FROM (
    SELECT mesto, COUNT(*) AS pocet 
    FROM uzivatele 
    GROUP BY mesto
) AS statistika
WHERE pocet > 5;

-- V SELECT (korelovanÃ½ poddotaz)
SELECT 
    jmeno, 
    (SELECT COUNT(*) FROM objednavky WHERE uzivatel_id = u.id) AS pocet_objednavek
FROM uzivatele u;
-- Pro kaÅ¾dÃ©ho uÅ¾ivatele spoÄÃ­tÃ¡ poÄet objednÃ¡vek</pre>

                <h2>Kdy pouÅ¾Ã­t JOIN vs Subquery?</h2>
                <ul>
                    <li><strong>JOIN:</strong> KdyÅ¾ potÅ™ebujeÅ¡ sloupce z obou tabulek ve vÃ½sledku</li>
                    <li><strong>Subquery:</strong> KdyÅ¾ kontrolujeÅ¡ existenci nebo poÄÃ­tÃ¡Å¡ agregace</li>
                    <li>JOINy jsou obvykle <strong>rychlejÅ¡Ã­</strong> â€“ databÃ¡ze je lÃ©pe optimalizuje</li>
                </ul>

                <h2>ğŸ“ ShrnutÃ­ pro maturitu</h2>
                <div
                    style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                    <ul>
                        <li><strong>INNER JOIN:</strong> Pouze kde je shoda v obou tabulkÃ¡ch</li>
                        <li><strong>LEFT JOIN:</strong> VÅ¡echno z levÃ© + shody z pravÃ© (NULL kdyÅ¾ nenÃ­ shoda)</li>
                        <li><strong>RIGHT JOIN:</strong> Opak LEFT JOIN (mÃ©nÄ› pouÅ¾Ã­vanÃ½)</li>
                        <li><strong>CROSS JOIN:</strong> KartÃ©zskÃ½ souÄin â€“ kaÅ¾dÃ½ s kaÅ¾dÃ½m</li>
                        <li><strong>SELF JOIN:</strong> Tabulka spojenÃ¡ sama se sebou</li>
                        <li><strong>Aliasy</strong> (u, o) zpÅ™ehledÅˆujÃ­ dlouhÃ© dotazy</li>
                        <li>PodmÃ­nka spojenÃ­: <code>ON tabulka1.klÃ­Ä = tabulka2.cizÃ­_klÃ­Ä</code></li>
                    </ul>
                </div>
            </div>
        </main>
        <footer>
            <p>Â© 2025 MaturitaPortÃ¡l | VytvoÅ™eno pro pÅ™Ã­pravu na maturitu</p>
            <p style="margin-top: 0.5rem; font-size: 0.85rem;">
                <a href="privacy.html" style="color: var(--text-muted);">ZÃ¡sady ochrany osobnÃ­ch ÃºdajÅ¯</a> | 
                <a href="mailto:prasecibota@gmail.com" style="color: var(--text-muted);">Kontakt</a>
            </p>
        </footer>
    </div>
    <script src="../../script.js"></script>
</body>

</html>