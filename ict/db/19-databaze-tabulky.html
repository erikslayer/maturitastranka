<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Datab√°ze a tabulky v relaƒçn√≠ch datab√°z√≠ch - CREATE, datov√© typy, kl√≠ƒçe.">
    <title>19. Datab√°ze a tabulky - DB | Maturita Port√°l</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../styles.css">
</head>

<body>
    <div class="container">
        <header>
            <a href="../../index.html" class="logo">MaturitaPort√°l</a>
            <nav>
                <ul>
                    <li><a href="../../index.html">Dom≈Ø</a></li>
                    <li><a href="../../literatura/index.html">Literatura</a></li>
                    <li><a href="../index.html" class="active">ICT</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <nav class="breadcrumb">
                <a href="../../index.html">Dom≈Ø</a><span class="separator">‚Ä∫</span>
                <a href="../index.html">ICT</a><span class="separator">‚Ä∫</span>
                <a href="../db.html">Datab√°ze</a><span class="separator">‚Ä∫</span>
                <span class="current">Datab√°ze a tabulky</span>
            </nav>
            <div class="book-header animate-fade-in">
                <h1>üìä Datab√°ze a tabulky v relaƒçn√≠ch datab√°z√≠ch</h1>
                <p class="author">T√©ma 19 - Datab√°ze</p>
                <div class="meta">
                    <span class="meta-item">üíæ Datab√°ze</span>
                    <span class="meta-item">üìö Maturitn√≠ okruh</span>
                </div>
            </div>
            <div class="glass-panel animate-fade-in book-content">
                <h2>üìñ Spr√°va datab√°z√≠</h2>
                <p>Datab√°ze je <strong>kontejner pro tabulky</strong> a dal≈°√≠ objekty (views, procedury...). Jedna
                    instance MySQL/PostgreSQL m≈Ø≈æe obsahovat mnoho datab√°z√≠.</p>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- Zobrazen√≠ existuj√≠c√≠ch datab√°z√≠
SHOW DATABASES;

-- Vytvo≈ôen√≠ nov√© datab√°ze
CREATE DATABASE nazev_databaze;
CREATE DATABASE IF NOT EXISTS nazev_databaze;  -- Nevyhod√≠ chybu pokud existuje

-- S nastaven√≠m k√≥dov√°n√≠ (d≈Øle≈æit√© pro ƒçesk√© znaky!)
CREATE DATABASE eshop 
    CHARACTER SET utf8mb4 
    COLLATE utf8mb4_czech_ci;

-- Pou≈æit√≠ datab√°ze (p≈ôepnut√≠ kontextu)
USE nazev_databaze;

-- Smaz√°n√≠ datab√°ze (‚ö†Ô∏è NEN√ÅVRATN√â!)
DROP DATABASE nazev_databaze;
DROP DATABASE IF EXISTS nazev_databaze;</pre>

                <h2>Vytvo≈ôen√≠ tabulky (CREATE TABLE)</h2>
                <p>Tabulka je z√°kladn√≠ struktura pro ukl√°d√°n√≠ dat. Definuje≈° sloupce, jejich typy a omezen√≠.</p>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
CREATE TABLE uzivatele (
    -- sloupec     typ               omezen√≠
    id             INT               AUTO_INCREMENT PRIMARY KEY,
    jmeno          VARCHAR(50)       NOT NULL,
    prijmeni       VARCHAR(50)       NOT NULL,
    email          VARCHAR(100)      UNIQUE,
    vek            INT               CHECK (vek >= 0 AND vek < 150),
    aktivni        BOOLEAN           DEFAULT TRUE,
    datum_registrace DATE            DEFAULT CURRENT_DATE,
    poznamka       TEXT
);

-- Co znamenaj√≠ jednotliv√° omezen√≠:
-- AUTO_INCREMENT: Automaticky se zvy≈°uje (1, 2, 3...)
-- PRIMARY KEY: Unik√°tn√≠ identifik√°tor, NOT NULL
-- NOT NULL: Hodnota je povinn√°
-- UNIQUE: Hodnota mus√≠ b√Ωt v cel√© tabulce jedineƒçn√°
-- CHECK: Kontrola podm√≠nky
-- DEFAULT: V√Ωchoz√≠ hodnota</pre>

                <h2>Datov√© typy MySQL</h2>

                <h3>ƒå√≠seln√© typy</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem;">
                    <tr style="background: rgba(255,255,255,0.1);">
                        <th style="padding: 0.5rem;">Typ</th>
                        <th style="padding: 0.5rem;">Velikost</th>
                        <th style="padding: 0.5rem;">Rozsah</th>
                        <th style="padding: 0.5rem;">Pou≈æit√≠</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>TINYINT</code></td>
                        <td style="padding: 0.5rem;">1 B</td>
                        <td style="padding: 0.5rem;">-128 a≈æ 127</td>
                        <td style="padding: 0.5rem;">Vƒõk, mal√° ƒç√≠sla</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>INT</code></td>
                        <td style="padding: 0.5rem;">4 B</td>
                        <td style="padding: 0.5rem;">¬±2.1 miliardy</td>
                        <td style="padding: 0.5rem;">ID, poƒçty (nejƒçastƒõj≈°√≠)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>BIGINT</code></td>
                        <td style="padding: 0.5rem;">8 B</td>
                        <td style="padding: 0.5rem;">¬±9 trilion≈Ø</td>
                        <td style="padding: 0.5rem;">Velk√° ID, ƒçasov√° raz√≠tka</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>DECIMAL(m,d)</code></td>
                        <td style="padding: 0.5rem;">variabiln√≠</td>
                        <td style="padding: 0.5rem;">p≈ôesn√° ƒç√≠sla</td>
                        <td style="padding: 0.5rem;"><strong>Pen√≠ze!</strong> DECIMAL(10,2)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>FLOAT/DOUBLE</code></td>
                        <td style="padding: 0.5rem;">4/8 B</td>
                        <td style="padding: 0.5rem;">desetinn√°</td>
                        <td style="padding: 0.5rem;">Vƒõdeck√© v√Ωpoƒçty (nep≈ôesn√©!)</td>
                    </tr>
                </table>

                <p><strong>‚ö†Ô∏è Pro pen√≠ze v≈ædy DECIMAL!</strong> FLOAT a DOUBLE maj√≠ zaokrouhlovac√≠ chyby.</p>

                <h3>Textov√© typy</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem;">
                    <tr style="background: rgba(255,255,255,0.1);">
                        <th style="padding: 0.5rem;">Typ</th>
                        <th style="padding: 0.5rem;">Max d√©lka</th>
                        <th style="padding: 0.5rem;">Pou≈æit√≠</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>CHAR(n)</code></td>
                        <td style="padding: 0.5rem;">255</td>
                        <td style="padding: 0.5rem;">Pevn√° d√©lka (PSƒå, k√≥dy)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>VARCHAR(n)</code></td>
                        <td style="padding: 0.5rem;">65,535</td>
                        <td style="padding: 0.5rem;">Promƒõnn√° d√©lka (jm√©na, email)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>TEXT</code></td>
                        <td style="padding: 0.5rem;">65,535</td>
                        <td style="padding: 0.5rem;">Dlouh√Ω text (popis, koment√°≈ô)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>ENUM</code></td>
                        <td style="padding: 0.5rem;">-</td>
                        <td style="padding: 0.5rem;">V√Ωƒçet: ENUM('M', 'F', 'X')</td>
                    </tr>
                </table>

                <h3>Datum a ƒças</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
DATE          -- '2025-12-13'           (jen datum)
TIME          -- '14:30:00'             (jen ƒças)
DATETIME      -- '2025-12-13 14:30:00'  (datum + ƒças)
TIMESTAMP     -- jako DATETIME, ale ukl√°d√° UTC
YEAR          -- 2025                    (jen rok)</pre>

                <h2>Kl√≠ƒçe</h2>

                <h3>Prim√°rn√≠ kl√≠ƒç (PRIMARY KEY)</h3>
                <p><strong>Unik√°tn√≠ identifik√°tor</strong> ka≈æd√©ho z√°znamu v tabulce.</p>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- Zp≈Øsob 1: Inline
id INT PRIMARY KEY AUTO_INCREMENT

-- Zp≈Øsob 2: Na konci definice
CREATE TABLE produkty (
    id INT AUTO_INCREMENT,
    nazev VARCHAR(100),
    PRIMARY KEY (id)
);

-- Slo≈æen√Ω prim√°rn√≠ kl√≠ƒç (kombinace je unik√°tn√≠)
CREATE TABLE objednavka_produkt (
    objednavka_id INT,
    produkt_id INT,
    mnozstvi INT,
    PRIMARY KEY (objednavka_id, produkt_id)
);</pre>

                <h3>Ciz√≠ kl√≠ƒç (FOREIGN KEY)</h3>
                <p><strong>Odkaz na prim√°rn√≠ kl√≠ƒç</strong> jin√© tabulky. Zaji≈°≈•uje referenƒçn√≠ integritu.</p>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
CREATE TABLE objednavky (
    id INT AUTO_INCREMENT PRIMARY KEY,
    datum DATE NOT NULL,
    uzivatel_id INT NOT NULL,
    
    -- Ciz√≠ kl√≠ƒç odkazuje na uzivatele.id
    FOREIGN KEY (uzivatel_id) 
        REFERENCES uzivatele(id)
        ON DELETE RESTRICT          -- Zabr√°n√≠ smaz√°n√≠ u≈æivatele s objedn√°vkami
        ON UPDATE CASCADE           -- P≈ôi zmƒõnƒõ ID u≈æivatele aktualizuje
);

-- Pokus o vlo≈æen√≠ neexistuj√≠c√≠ho u≈æivatele sel≈æe
INSERT INTO objednavky (datum, uzivatel_id) VALUES ('2025-12-13', 999);
-- Error: Cannot add or update a child row: a foreign key constraint fails</pre>

                <h2>√öprava tabulky (ALTER TABLE)</h2>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- P≈ôid√°n√≠ sloupce
ALTER TABLE uzivatele ADD telefon VARCHAR(20);
ALTER TABLE uzivatele ADD adresa TEXT AFTER email;  -- Za sloupec email

-- Zmƒõna datov√©ho typu
ALTER TABLE uzivatele MODIFY vek SMALLINT;

-- P≈ôejmenov√°n√≠ sloupce (MySQL 8+)
ALTER TABLE uzivatele RENAME COLUMN jmeno TO krestni_jmeno;

-- Smaz√°n√≠ sloupce
ALTER TABLE uzivatele DROP COLUMN telefon;

-- P≈ôid√°n√≠ indexu
ALTER TABLE uzivatele ADD INDEX idx_email (email);

-- P≈ôid√°n√≠ ciz√≠ho kl√≠ƒçe
ALTER TABLE objednavky 
    ADD FOREIGN KEY (produkt_id) REFERENCES produkty(id);</pre>

                <h2>Maz√°n√≠ tabulky</h2>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- Smaz√°n√≠ cel√© tabulky (struktura i data)
DROP TABLE nazev_tabulky;
DROP TABLE IF EXISTS nazev_tabulky;

-- Smaz√°n√≠ pouze dat (struktura z≈Østane)
TRUNCATE TABLE nazev_tabulky;
-- Rychlej≈°√≠ ne≈æ DELETE FROM, resetuje AUTO_INCREMENT

-- P≈ôejmenov√°n√≠ tabulky
RENAME TABLE stary_nazev TO novy_nazev;</pre>

                <h2>Zobrazen√≠ informac√≠</h2>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- Seznam tabulek v datab√°zi
SHOW TABLES;

-- Struktura tabulky
DESCRIBE uzivatele;
-- nebo
SHOW COLUMNS FROM uzivatele;

-- Kompletn√≠ CREATE p≈ô√≠kaz
SHOW CREATE TABLE uzivatele;</pre>

                <h2>üéì Shrnut√≠ pro maturitu</h2>
                <div
                    style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                    <ul>
                        <li><strong>CREATE DATABASE:</strong> Vytvo≈ô√≠ datab√°zi, USE ji aktivuje</li>
                        <li><strong>CREATE TABLE:</strong> Definice sloupc≈Ø, typ≈Ø a omezen√≠</li>
                        <li><strong>ƒå√≠seln√© typy:</strong> INT (bƒõ≈æn√©), DECIMAL (pen√≠ze!), BIGINT (velk√°)</li>
                        <li><strong>Textov√© typy:</strong> VARCHAR (promƒõnn√°), CHAR (pevn√°), TEXT (dlouh√Ω)</li>
                        <li><strong>PRIMARY KEY:</strong> Unik√°tn√≠ identifik√°tor (typicky id AUTO_INCREMENT)</li>
                        <li><strong>FOREIGN KEY:</strong> Odkaz na jinou tabulku, referenƒçn√≠ integrita</li>
                        <li><strong>ALTER TABLE:</strong> √öprava struktury (ADD, MODIFY, DROP)</li>
                        <li><strong>DROP vs TRUNCATE:</strong> DROP sma≈æe v≈°e, TRUNCATE jen data</li>
                    </ul>
                </div>
            </div>
        </main>
        <footer>
            <p>¬© 2025 MaturitaPort√°l | Vytvo≈ôeno pro p≈ô√≠pravu na maturitu</p>
            <p style="margin-top: 0.5rem; font-size: 0.85rem;">
                <a href="privacy.html" style="color: var(--text-muted);">Z√°sady ochrany osobn√≠ch √∫daj≈Ø</a> | 
                <a href="mailto:prasecibota@gmail.com" style="color: var(--text-muted);">Kontakt</a>
            </p>
        </footer>
    </div>
    <script src="../../script.js"></script>
</body>

</html>