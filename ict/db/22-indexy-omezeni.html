<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Indexy a omezen√≠ v relaƒçn√≠ch datab√°z√≠ch - PRIMARY, UNIQUE, FOREIGN KEY.">
    <title>22. Indexy a omezen√≠ - DB | Maturita Port√°l</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../styles.css">
</head>

<body>
    <div class="container">
        <header>
            <a href="../../index.html" class="logo">MaturitaPort√°l</a>
            <nav>
                <ul>
                    <li><a href="../../index.html">Dom≈Ø</a></li>
                    <li><a href="../../literatura/index.html">Literatura</a></li>
                    <li><a href="../index.html" class="active">ICT</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <nav class="breadcrumb">
                <a href="../../index.html">Dom≈Ø</a><span class="separator">‚Ä∫</span>
                <a href="../index.html">ICT</a><span class="separator">‚Ä∫</span>
                <a href="../db.html">Datab√°ze</a><span class="separator">‚Ä∫</span>
                <span class="current">Indexy a omezen√≠</span>
            </nav>
            <div class="book-header animate-fade-in">
                <h1>üîê Indexy a omezen√≠ v relaƒçn√≠ch datab√°z√≠ch</h1>
                <p class="author">T√©ma 22 - Datab√°ze</p>
                <div class="meta">
                    <span class="meta-item">üíæ Datab√°ze</span>
                    <span class="meta-item">üìö Maturitn√≠ okruh</span>
                </div>
            </div>
            <div class="glass-panel animate-fade-in book-content">
                <h2>üìñ Indexy ‚Äì zrychlen√≠ vyhled√°v√°n√≠</h2>
                <p>Index je <strong>datov√° struktura</strong>, kter√° urychluje vyhled√°v√°n√≠ v datab√°zi. Funguje podobnƒõ
                    jako <strong>rejst≈ô√≠k v knize</strong> ‚Äì m√≠sto proch√°zen√≠ cel√© knihy se pod√≠v√°≈° do rejst≈ô√≠ku a
                    najde≈° p≈ôesnou str√°nku.</p>

                <p><strong>üí° Bez indexu:</strong> Datab√°ze mus√≠ proj√≠t V≈†ECHNY ≈ô√°dky (full table scan) ‚Üí pomal√© p≈ôi
                    milionech z√°znam≈Ø.</p>
                <p><strong>üí° S indexem:</strong> Datab√°ze najde data p≈ô√≠mo ‚Üí mnohon√°sobnƒõ rychlej≈°√≠.</p>

                <h3>Jak index funguje?</h3>
                <p>Index je typicky implementov√°n jako <strong>B-tree</strong> (vyv√°≈æen√Ω strom), kter√Ω umo≈æ≈àuje rychl√©
                    hled√°n√≠ v logaritmick√©m ƒçase.</p>

                <div style="background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <pre style="font-family: monospace; font-size: 0.9rem;">
Tabulka: 1 000 000 ≈ô√°dk≈Ø
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Bez indexu:  a≈æ 1 000 000 porovn√°n√≠  ‚Üí O(n)
S indexem:   max 20 porovn√°n√≠        ‚Üí O(log n)</pre>
                </div>

                <h3>Typy index≈Ø</h3>
                <ul>
                    <li><strong>PRIMARY KEY:</strong> Automaticky vytvo≈ôen√Ω unik√°tn√≠ index, nesm√≠ b√Ωt NULL</li>
                    <li><strong>UNIQUE:</strong> Unik√°tn√≠ hodnoty, m≈Ø≈æe obsahovat NULL (jen jednou)</li>
                    <li><strong>INDEX:</strong> Bƒõ≈æn√Ω index pro rychl√© vyhled√°v√°n√≠ (nemus√≠ b√Ωt unik√°tn√≠)</li>
                    <li><strong>FULLTEXT:</strong> Pro fulltextov√© vyhled√°v√°n√≠ v textu (prohled√°v√°n√≠ slov)</li>
                    <li><strong>COMPOSITE:</strong> Index na v√≠ce sloupc√≠ch najednou</li>
                </ul>

                <h3>Vytvo≈ôen√≠ index≈Ø</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- P≈ôi vytvo≈ôen√≠ tabulky
CREATE TABLE uzivatele (
    id INT PRIMARY KEY,              -- Automatick√Ω index
    email VARCHAR(100) UNIQUE,       -- Automatick√Ω unik√°tn√≠ index
    jmeno VARCHAR(50),
    mesto VARCHAR(50),
    INDEX idx_jmeno (jmeno),         -- Explicitn√≠ index
    INDEX idx_mesto_jmeno (mesto, jmeno)  -- Slo≈æen√Ω index
);

-- P≈ôid√°n√≠ indexu k existuj√≠c√≠ tabulce
CREATE INDEX idx_vek ON uzivatele(vek);
CREATE UNIQUE INDEX idx_email ON uzivatele(email);

-- Smaz√°n√≠ indexu
DROP INDEX idx_vek ON uzivatele;</pre>

                <h3>Kdy pou≈æ√≠vat indexy?</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: rgba(255,255,255,0.1);">
                        <th style="padding: 0.5rem;">‚úì Pou≈æij index</th>
                        <th style="padding: 0.5rem;">‚úó Nepou≈æ√≠vej index</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;">Sloupce ve WHERE</td>
                        <td style="padding: 0.5rem;">Mal√© tabulky (stovky ≈ô√°dk≈Ø)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;">Sloupce pro JOIN</td>
                        <td style="padding: 0.5rem;">Sloupce s m√°lo unik√°tn√≠mi hodnotami (pohlav√≠)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;">Sloupce v ORDER BY</td>
                        <td style="padding: 0.5rem;">Tabulky s ƒçast√Ωm INSERT/UPDATE</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;">Ciz√≠ kl√≠ƒçe</td>
                        <td style="padding: 0.5rem;">Sloupce, kter√© se z≈ô√≠dka prohled√°vaj√≠</td>
                    </tr>
                </table>

                <p><strong>‚ö†Ô∏è Nev√Ωhody index≈Ø:</strong></p>
                <ul>
                    <li>Zpomaluj√≠ INSERT, UPDATE, DELETE (index se mus√≠ aktualizovat)</li>
                    <li>Zab√≠raj√≠ m√≠sto na disku</li>
                    <li>P≈ô√≠li≈° mnoho index≈Ø = degradace v√Ωkonu</li>
                </ul>

                <h2>üìã Omezen√≠ (Constraints)</h2>
                <p>Omezen√≠ zaji≈°≈•uj√≠ <strong>integritu a konzistenci dat</strong>. Datab√°ze automaticky kontroluje, zda
                    data spl≈àuj√≠ pravidla.</p>

                <h3>NOT NULL ‚Äì hodnota je povinn√°</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
CREATE TABLE uzivatele (
    jmeno VARCHAR(50) NOT NULL,      -- Povinn√© pole
    email VARCHAR(100)               -- Voliteln√© (m≈Ø≈æe b√Ωt NULL)
);

INSERT INTO uzivatele (jmeno) VALUES ('Jan');        -- OK
INSERT INTO uzivatele (email) VALUES ('a@b.cz');     -- CHYBA! jmeno je NOT NULL</pre>

                <h3>DEFAULT ‚Äì v√Ωchoz√≠ hodnota</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
CREATE TABLE produkty (
    nazev VARCHAR(100) NOT NULL,
    cena DECIMAL(10,2) DEFAULT 0.00,
    aktivni BOOLEAN DEFAULT TRUE,
    vytvoreno TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Pokud nezad√°≈° hodnotu, pou≈æije se default
INSERT INTO produkty (nazev) VALUES ('Triƒçko');
-- ‚Üí cena = 0.00, aktivni = TRUE, vytvoreno = aktu√°ln√≠ ƒças</pre>

                <h3>UNIQUE ‚Äì unik√°tn√≠ hodnoty</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
CREATE TABLE uzivatele (
    email VARCHAR(100) UNIQUE        -- Ka≈æd√Ω email jen jednou
);

INSERT INTO uzivatele (email) VALUES ('jan@email.cz');  -- OK
INSERT INTO uzivatele (email) VALUES ('jan@email.cz');  -- CHYBA! Duplicate entry</pre>

                <h3>CHECK ‚Äì kontrola hodnot</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
CREATE TABLE produkty (
    cena DECIMAL(10,2) CHECK (cena >= 0),      -- Cena nesm√≠ b√Ωt z√°porn√°
    mnozstvi INT CHECK (mnozstvi > 0),          -- Mno≈æstv√≠ mus√≠ b√Ωt kladn√©
    hodnoceni INT CHECK (hodnoceni BETWEEN 1 AND 5)
);

INSERT INTO produkty (cena) VALUES (-100);      -- CHYBA! Check constraint violated</pre>

                <h3>PRIMARY KEY ‚Äì prim√°rn√≠ kl√≠ƒç</h3>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- Kombinace UNIQUE + NOT NULL + vytvo≈ô√≠ index
CREATE TABLE uzivatele (
    id INT PRIMARY KEY AUTO_INCREMENT,   -- Automaticky se zvy≈°uje
    jmeno VARCHAR(50)
);

-- Slo≈æen√Ω prim√°rn√≠ kl√≠ƒç
CREATE TABLE objednavka_polozka (
    objednavka_id INT,
    produkt_id INT,
    mnozstvi INT,
    PRIMARY KEY (objednavka_id, produkt_id)  -- Kombinace je unik√°tn√≠
);</pre>

                <h3>FOREIGN KEY ‚Äì ciz√≠ kl√≠ƒç</h3>
                <p>Zaji≈°≈•uje <strong>referenƒçn√≠ integritu</strong> ‚Äì hodnoty mus√≠ existovat v odkazovan√© tabulce.</p>

                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
CREATE TABLE uzivatele (
    id INT PRIMARY KEY AUTO_INCREMENT,
    jmeno VARCHAR(50)
);

CREATE TABLE objednavky (
    id INT PRIMARY KEY AUTO_INCREMENT,
    uzivatel_id INT,
    datum DATE,
    FOREIGN KEY (uzivatel_id) REFERENCES uzivatele(id)
        ON DELETE CASCADE       -- Smaz√°n√≠ u≈æivatele sma≈æe i jeho objedn√°vky
        ON UPDATE CASCADE       -- Zmƒõna ID u≈æivatele se prom√≠tne
);

-- Pokus o vlo≈æen√≠ neexistuj√≠c√≠ho u≈æivatele
INSERT INTO objednavky (uzivatel_id) VALUES (999);
-- CHYBA! Foreign key constraint fails (u≈æivatel 999 neexistuje)</pre>

                <h3>Akce p≈ôi ON DELETE / ON UPDATE</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: rgba(255,255,255,0.1);">
                        <th style="padding: 0.5rem;">Akce</th>
                        <th style="padding: 0.5rem;">Popis</th>
                        <th style="padding: 0.5rem;">P≈ô√≠klad</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>CASCADE</code></td>
                        <td style="padding: 0.5rem;">Sma≈æe/aktualizuje z√°visl√© z√°znamy</td>
                        <td style="padding: 0.5rem;">Smaz√°n√≠ u≈æivatele sma≈æe jeho objedn√°vky</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>SET NULL</code></td>
                        <td style="padding: 0.5rem;">Nastav√≠ NULL do ciz√≠ho kl√≠ƒçe</td>
                        <td style="padding: 0.5rem;">Objedn√°vka z≈Østane, uzivatel_id = NULL</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>RESTRICT</code></td>
                        <td style="padding: 0.5rem;">Zabr√°n√≠ smaz√°n√≠/zmƒõnƒõ</td>
                        <td style="padding: 0.5rem;">Nelze smazat u≈æivatele s objedn√°vkami</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem;"><code>NO ACTION</code></td>
                        <td style="padding: 0.5rem;">Jako RESTRICT (kontrola na konci transakce)</td>
                        <td style="padding: 0.5rem;">Stejn√© jako RESTRICT</td>
                    </tr>
                </table>

                <h2>Zobrazen√≠ informac√≠ o tabulce</h2>
                <pre style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; overflow-x: auto;">
-- Zobrazen√≠ struktury tabulky
DESCRIBE uzivatele;
-- nebo
SHOW COLUMNS FROM uzivatele;

-- Zobrazen√≠ index≈Ø
SHOW INDEX FROM uzivatele;

-- Kompletn√≠ definice tabulky vƒçetnƒõ constraints
SHOW CREATE TABLE uzivatele;</pre>

                <h2>üéì Shrnut√≠ pro maturitu</h2>
                <div
                    style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                    <ul>
                        <li><strong>INDEX:</strong> Zrychluje vyhled√°v√°n√≠ (jako rejst≈ô√≠k v knize)</li>
                        <li><strong>PRIMARY KEY:</strong> Unik√°tn√≠ + NOT NULL + automatick√Ω index</li>
                        <li><strong>UNIQUE:</strong> Unik√°tn√≠ hodnoty (m≈Ø≈æe b√Ωt NULL jednou)</li>
                        <li><strong>NOT NULL:</strong> Hodnota je povinn√°</li>
                        <li><strong>DEFAULT:</strong> V√Ωchoz√≠ hodnota kdy≈æ nezad√°≈°</li>
                        <li><strong>CHECK:</strong> Kontrola podm√≠nky (cena >= 0)</li>
                        <li><strong>FOREIGN KEY:</strong> Odkaz na jinou tabulku (referenƒçn√≠ integrita)</li>
                        <li><strong>CASCADE:</strong> Zmƒõny se propaguj√≠ do z√°visl√Ωch z√°znam≈Ø</li>
                    </ul>
                </div>
            </div>
        </main>
        <footer>
            <p>¬© 2025 MaturitaPort√°l | Vytvo≈ôeno pro p≈ô√≠pravu na maturitu</p>
            <p style="margin-top: 0.5rem; font-size: 0.85rem;">
                <a href="privacy.html" style="color: var(--text-muted);">Z√°sady ochrany osobn√≠ch √∫daj≈Ø</a> | 
                <a href="mailto:prasecibota@gmail.com" style="color: var(--text-muted);">Kontakt</a>
            </p>
        </footer>
    </div>
    <script src="../../script.js"></script>
</body>

</html>